name: Build Agents Action
description: Build country's agents into a docker image
inputs:
  fc-country:
    required: true
    description: Country's agents
  github-token:
    required: true
    description: GH credentials
runs:
  using: composite
  steps:
    - run: |
        cp ${{ github.action_path }}/Dockerfile . |
        cp ${{ github.action_path }}/.dockerignore .
      shell: bash
    - run: docker build \
        --build-arg FC_COUNTRY="${{ inputs.fc-country }}" \
        --tag fc-agents-${{ inputs.fc-country }}:latest \
        .
      shell: bash
    - run: docker login docker.pkg.github.com \
        --username ${{ github.actor }} \
        --password ${{ inputs.github-token }}
      shell: bash
